# 视频抽帧工具 
这是一个轻量级的 Python 工具，用于从 CS1.6 游戏视频中自动截取帧图像并保存为图片，生成的图片可直接用于后续目标检测模型（如 YOLO）的数据集制作，解决人工截图效率低、数据量不足的问题。


## 一、工具核心功能
1. **自动创建目录**：运行时会自动生成 `dataset_cs1.6` 文件夹，用于存放抽帧后的图片，无需手动创建目录。
2. **按帧率控制抽帧密度**：默认每秒抽取 2 帧（通过 `frame_interval` 计算），避免抽帧过多导致数据冗余，也可根据需求调整抽取频率。
3. **批量保存图片**：抽帧后的图片以 `data_1.jpg`、`data_2.jpg`... 格式有序命名，方便后续数据集标注和管理。
4. **自动终止与资源释放**：视频读取完毕后会自动停止程序并释放视频资源，避免内存占用。


## 二、环境依赖
仅需安装 OpenCV 库（处理视频和图像），Python 版本建议 3.7+：
```bash
# 安装依赖命令
pip install opencv-python
```


## 三、文件说明
| 文件名               | 作用说明                                  |
|--------------------|-------------------------------------------|
| `video_extract.py`（示例名）| 工具主程序，包含视频读取、抽帧、保存逻辑   |
| `video_cs1.6.mp4`  | 输入的 CS1.6 游戏视频（需自行准备，放在程序同级目录）|
| `dataset_cs1.6/`   | 自动生成的输出目录，存放抽帧后的图片文件   |


## 四、使用步骤
### 1. 准备输入视频
将需要抽帧的 CS1.6 游戏视频命名为 `video_cs1.6.mp4`，并与工具主程序（如 `video_extract.py`）放在同一文件夹下。  
- 若视频文件名不同，需修改代码中 `cv2.VideoCapture('video_cs1.6.mp4')` 里的引号内容，替换为实际视频文件名（如 `cs16_gameplay.mp4`）。

### 2. 调整抽帧频率（可选）
默认每秒抽取 2 帧，若需调整（如每秒抽 1 帧或 3 帧），可修改代码中 `frame_interval` 相关逻辑：
```python
# 原代码（每秒抽 2 帧）
frame_interval = int(fps/2)  

# 若需每秒抽 1 帧，修改为：
frame_interval = int(fps/1)  

# 若需每秒抽 3 帧，修改为：
frame_interval = int(fps/3)  
```

### 3. 运行工具
在终端进入程序所在目录，执行以下命令启动抽帧：
```bash
python video_extract.py
```
- 程序运行时无额外输出，视频读取完毕后会自动终止；
- 打开 `dataset_cs1.6` 文件夹，即可看到按顺序命名的抽帧图片。


## 五、注意事项
1. **视频格式兼容性**：默认支持 `mp4` 格式，若输入视频为 `avi`、`mov` 等其他格式，需确保本地安装了对应解码器，或先将视频转换为 `mp4` 格式。
2. **文件路径问题**：若视频不在程序同级目录，需在 `cv2.VideoCapture()` 中填写完整视频路径（如 `cv2.VideoCapture('D:/videos/video_cs1.6.mp4')`）。
3. **存储空间**：抽帧生成的图片会占用一定空间（每张图片约几十 KB 到几百 KB），若视频时长较长（如 1 小时），建议提前确认磁盘空间充足。
4. **后续用途**：抽帧后的图片可直接导入 labelImg、LabelStudio 等标注工具，标注“敌人”“武器”等目标，生成 YOLO 训练所需的 `txt` 标注文件。
